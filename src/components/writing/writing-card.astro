---
import { generateGradient } from "@/lib/gradient";
import type { CollectionEntry } from "astro:content";
import WritingSummary from "./writing-summary.astro";

interface Props {
	writing: CollectionEntry<"writing">;
}

const { writing } = Astro.props;
const { hue1, hue2 } = generateGradient(writing.slug);
---

<div
	class="group hover:bg-accent hover:text-accent-foreground focus-visible:ring-ring relative flex aspect-square flex-col justify-between overflow-hidden rounded-2xl p-6 transition-colors focus:outline-none focus-visible:ring-2"
>
	<a href={`/writing/${writing.slug}`} class="flex h-full flex-col">
		<svg
			class="absolute inset-0 h-full w-full opacity-60 transition-transform duration-500 group-hover:scale-120"
			viewBox="0 0 100 100"
			preserveAspectRatio="xMidYMid slice"
		>
			<defs>
				<radialGradient id={`gradient-${writing.slug}`}>
					<stop offset="0%" stop-color={`hsl(${hue1}, 80%, 40%)`}></stop>
					<stop offset="100%" stop-color={`hsl(${hue2}, 80%, 40%)`}></stop>
				</radialGradient>
			</defs>
			<rect width="100" height="100" fill={`url(#gradient-${writing.slug})`}></rect>
		</svg>
		<div class="relative flex h-full flex-col gap-4">
			<div class="flex flex-1 items-end">
				<h2 class="group-hover:text-accent-foreground line-clamp-2 text-2xl md:text-3xl">
					{writing.data.title}
				</h2>
			</div>
			<WritingSummary
				date={writing.data.date}
				categories={writing.data.categories}
				class="flex w-fit flex-row gap-4 text-sm"
			/>
		</div>
	</a>
</div>
