---
import CategoryList from "@/components/ui/category-list.astro";
import { generateGradient } from "@/lib/gradient";
import type { CollectionEntry } from "astro:content";

interface Props {
	writing: CollectionEntry<"writing">;
}

const { writing } = Astro.props;
const { hue1, hue2 } = generateGradient(writing.slug);
---

<a href={`/writing/${writing.slug}`}>
	<div
		class="group hover:bg-accent hover:text-accent-foreground focus-visible:ring-ring relative flex flex-col justify-between overflow-hidden rounded-2xl p-6 transition-colors duration-200 focus:outline-none focus-visible:ring-2 md:aspect-square"
	>
		<svg
			class="absolute inset-0 h-full w-full opacity-60 transition-transform duration-500 group-hover:scale-120"
			viewBox="0 0 100 100"
			preserveAspectRatio="xMidYMid slice"
		>
			<defs>
				<radialGradient id={`gradient-${writing.slug}`}>
					<stop offset="0%" stop-color={`hsl(${hue1}, 80%, 30%)`}></stop>
					<stop offset="100%" stop-color={`hsl(${hue2}, 80%, 30%)`}></stop>
				</radialGradient>
			</defs>
			<rect width="100" height="100" fill={`url(#gradient-${writing.slug})`}></rect>
		</svg>
		<div class="relative flex h-full flex-col justify-between gap-2">
			<div class="text-muted-foreground font-accent text-sm">
				{
					writing.data.date.toLocaleDateString("en-US", {
						year: "numeric",
						month: "long",
						day: "numeric",
					})
				}
			</div>
			<h2 class="group-hover:text-accent-foreground line-clamp-2 text-2xl md:text-3xl">
				{writing.data.title}
			</h2>
			<CategoryList
				categories={writing.data.categories}
				class="text-muted-foreground font-accent text-sm"
				basePath="/writing"
				asLinks={false}
			/>
		</div>
	</div>
</a>
