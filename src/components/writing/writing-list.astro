---
import type { CollectionEntry } from "astro:content";
import CategoryList from "@/components/ui/category-list.astro";

interface Props {
  writings: CollectionEntry<"writing">[];
}

const { writings } = Astro.props;

const sortedWritings = writings?.length
  ? [...writings].sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  : [];
---

{
  !writings?.length ? (
    <div>No writings found</div>
  ) : (
    <div class="grid gap-8">
      {sortedWritings.map((writing) => (
        <article class="prose">
          <h2>
            <a href={`/writing/${writing.slug}`}>{writing.data.title}</a>
          </h2>
          <div class="flex flex-col gap-2">
            <time datetime={writing.data.date.toISOString()}>
              {writing.data.date.toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })}
            </time>
            <CategoryList
              categories={writing.data.categories}
              class="text-sm text-muted-foreground font-['doto']"
              asLinks={true}
              basePath="/writing"
            />
          </div>
        </article>
      ))}
    </div>
  )
}
