---
import Layout from "@/layouts/layout.astro";
import { capitalize } from "@/lib/utils";
import CategorySelector from "@/components/ui/category-selector.astro";
import Tag from "@/components/ui/tag.astro";
import { collections } from "@/content/config";
import { cva } from "class-variance-authority";

type CollectionType = keyof typeof collections;

interface Props {
	type: CollectionType;
	category?: string;
	selector?: boolean;
	size?: "default" | "lg";
	tag?: boolean;
}

const { type, category, selector = false, size = "default", tag = false } = Astro.props;

const displayTitle = category ? `${capitalize(category)} - ${capitalize(type)}` : capitalize(type);

const containerVariants = cva("flex flex-col", {
	variants: {
		size: {
			default: "max-w-screen-2xl",
			lg: "",
		},
	},
	defaultVariants: {
		size: "default",
	},
});
---

<Layout title={displayTitle} size={size}>
	<div class={containerVariants({ size })}>
		<div class="mb-8 flex flex-col gap-6 border-b pb-6 md:mb-16 md:border-none md:pb-0">
			<h1 class="text-3xl font-medium md:text-4xl">
				{capitalize(type)}
			</h1>
			{selector && <CategorySelector type={type} />}
			{tag && category && <Tag type={type} category={category} />}
		</div>
		<slot />
	</div>
</Layout>
