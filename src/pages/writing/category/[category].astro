---
import { formatCollection } from "@/lib/format-collection";
import { getWritings } from "@/lib/get-collection";
import { WritingCategory } from "@/content/categories";
import WritingGrid from "@/components/writing/writing-grid.astro";
import CollectionLayout from "@/layouts/collection-layout.astro";

export function getStaticPaths() {
	return Object.values(WritingCategory).map((category) => ({
		params: { category },
	}));
}

const { category } = Astro.params;
const writings = await getWritings();
const filteredWritings = formatCollection<"writing">(writings, {
	category: category as WritingCategory,
	sortBy: "date",
	sortOrder: "desc",
});
---

<CollectionLayout type="writing" category={category}>
	<WritingGrid writings={filteredWritings} />
</CollectionLayout>
