---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { Badge } from "@/components/ui/badge";

export async function getStaticPaths() {
  const projects = await getCollection("projects");
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<Layout title={project.data.title}>
  <main class="container mx-auto px-4 py-8">
    <article>
      <div class="flex flex-col md:flex-row gap-12">
        <header class="flex flex-col gap-8">
          <h1 class="text-4xl">{project.data.title}</h1>
          <p class="text-sm text-muted-foreground">
            {
              project.data.date.toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })
            }
          </p>
          {
            project.data.categories.map((category: string) => (
              <Badge>{category}</Badge>
            ))
          }
        </header>
        <p>{project.data.description}</p>
      </div>
      {
        project.data.images && (
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            {project.data.images.map((image) => (
              <img src={image} alt={project.data.title} />
            ))}
          </div>
        )
      }
    </article>
  </main>
</Layout>
